@model Lagerverwaltung.ViewModels.IndexViewModel

@{
    ViewData["Title"] = "Übersicht";
}



    <div class="container">
        <h1>Index</h1>
        <a asp-action="Buchen" class="btn btn-primary btn-sm mb-3">
            <i class="fa fa-file"></i>  Einbuchen
        </a>
        <a asp-action="Dazubuchen" class="btn btn-primary btn-sm mb-3">
            Ware dazubuchen
        </a>
        <form asp-action="Index">
            <div class="input-group mb-3">
                <input asp-for="Suche_Beschreibung" class="form-control" placeholder="Beschreibung...">
                <div class="input-group-append">
                    <button class="btn btn-primary dropdown-toggle dropdown-toggle-split" type="button" data-toggle="collapse" data-target="#Erweiterung" aria-expanded="false" aria-controls="Erweiterung">
                        <span class="sr-only">Toggle Dropdown</span>
                    </button>
                </div>
            </div>
            <div class="collapse" id="Erweiterung">
                <div class="row">
                    <div class="col-md-4">
                        <div class="input-group mb-3">
                            <input asp-for="Suche_Hersteller" class="form-control" placeholder="Hersteller...">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="input-group mb-3">
                            <input asp-for="Suche_Kategorie" class="form-control" placeholder="Kategorie...">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="input-group mb-3">
                            <input asp-for="Suche_Kostenstellennr" class="form-control" placeholder="Kostenstellennr...">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="input-group mb-3">
                            <input asp-for="Suche_Lagerplatz" class="form-control" placeholder="Lagerplatz...">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="input-group mb-3">
                            <input asp-for="Suche_Lieferanten" class="form-control" placeholder="Lieferanten...">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="input-group mb-3">
                            <input asp-for="Suche_Modellnummer" class="form-control" placeholder="Modellnummer...">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="input-group mb-3">
                            <input asp-for="Suche_Seriennummer" class="form-control" placeholder="Seriennummer...">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="input-group mb-3">
                            <input asp-for="Suche_Auftragsnummer" class="form-control" placeholder="Auftragsnummer...">
                        </div>
                    </div>

                    <input asp-for="Sortierung" type="hidden" value="@Model.Sortierung">
                    <input asp-for="Suche" type="hidden" value="true">
                </div>
            </div>
            <div class="row">
                <div class="input-group mb-3 col-8">
                    <button type="submit" class="btn btn-primary">
                        <i class="fa fa-search"></i>  Suchen
                    </button>

                </div>
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label">Suchergebnisse: </label>
                    <div class="col-sm-8">
                        <input asp-for="ausgabeanzahl" class="form-control float-right" placeholder="Max. Zeilenanzahl" value="@Model.ausgabeanzahl" width="10" />
                    </div>
                </div>
        </form>



            <table class="table table-sm table-striped">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">
                            <form asp-action="Index">
                                <div class="input-group">
                                    <input asp-for="Suche_Beschreibung" type="hidden" value="@Model.Suche_Beschreibung">
                                    <input asp-for="Sortierung" type="hidden" value="Beschreibung">
                                    <input asp-for="Beschreiung" type="hidden" value="@Model.Beschreiung">
                                    <input asp-for="Menge" type="hidden" value="@Model.Menge">
                                    <input asp-for="Datum" type="hidden" value="@Model.Datum">
                                    <input asp-for="Lagerplatz" type="hidden" value="@Model.Lagerplatz">
                                    <input asp-for="Suche" type="hidden" value="true">
                                    <button type="submit" class=" btn btn-dark">
                                        Beschreibung
                                    </button>
                                </div>
                            </form>

                        </th>
                        <th scope="col">
                            <form asp-action="Index">
                                <div class="input-group">
                                    <input asp-for="Suche_Beschreibung" type="hidden" value="@Model.Suche_Beschreibung">
                                    <input asp-for="Sortierung" type="hidden" value="Lagerplatz">
                                    <input asp-for="Beschreiung" type="hidden" value="@Model.Beschreiung">
                                    <input asp-for="Menge" type="hidden" value="@Model.Menge">
                                    <input asp-for="Datum" type="hidden" value="@Model.Datum">
                                    <input asp-for="Lagerplatz" type="hidden" value="@Model.Lagerplatz">
                                    <input asp-for="Suche" type="hidden" value="true">
                                    <button type="submit" class=" btn btn-dark">
                                        Lagerplatz
                                    </button>
                                </div>
                            </form>

                        </th>
                        <th scope="col" class="align-items-center">
                            <form asp-action="Index">
                                <div class="input-group">
                                    <input asp-for="Suche_Beschreibung" type="hidden" value="@Model.Suche_Beschreibung">
                                    <input asp-for="Sortierung" type="hidden" value="Menge">
                                    <input asp-for="Beschreiung" type="hidden" value="@Model.Beschreiung">
                                    <input asp-for="Menge" type="hidden" value="@Model.Menge">
                                    <input asp-for="Datum" type="hidden" value="@Model.Datum">
                                    <input asp-for="Lagerplatz" type="hidden" value="@Model.Lagerplatz">
                                    <input asp-for="Suche" type="hidden" value="true">
                                    <button type="submit" class=" btn btn-dark">
                                        Menge
                                    </button>
                                </div>
                            </form>
                        </th>
                        <th scope="col" class="align-items-center">
                            <form asp-action="Index">
                                <div class="input-group">
                                    <input asp-for="Suche_Beschreibung" type="hidden" value="@Model.Suche_Beschreibung">
                                    <input asp-for="Sortierung" type="hidden" value="Datum">
                                    <input asp-for="Beschreiung" type="hidden" value="@Model.Beschreiung">
                                    <input asp-for="Menge" type="hidden" value="@Model.Menge">
                                    <input asp-for="Datum" type="hidden" value="@Model.Datum">
                                    <input asp-for="Lagerplatz" type="hidden" value="@Model.Lagerplatz">
                                    <input asp-for="Suche" type="hidden" value="true">
                                    <button type="submit" class=" btn btn-dark">
                                        Einlagerungsdatum
                                    </button>
                                </div>
                            </form>
                        </th>

                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @{ int i = 0;

                    }
                    @if (Model.Waren != null)
                    {


                        @foreach (var ware in Model.Waren)
                        {
                            i++;



                    <tr>
                        <th scope="row">@i</th>
                        <td>
                            @ware.Ware_Beschreibung
                            @if (Model.Reservierung[i - 1].Reserviert)
                            {
                                <span class="badge badge-pill badge-warning">Reserviert @Model.Reservierung[i - 1].Menge</span>
                            }
                        </td>

                        @foreach (var lagerp in Model.Lagerplatz_Beschreibung)
                        {
                            if (ware.Lagerplatz_Id == lagerp.Lagerplatz_Id)
                            {
                                <td class="text-center">
                                    @lagerp.Lagerplatz_Beschreibung
                                </td>
                            }
                        }

                         <td class="text-center">
                              @Convert.ToInt32(ware.Menge)
                         </td>
                         <td class="text-center">
                              @ware.Ware_Einlagerungsdatum.ToShortDateString()
                         </td>

                                <td>
                                    <a asp-action="Details" asp-route-id="@ware.Ware_Id " class="btn btn-outline-danger btn-sm">
                                        Details
                                    </a>


                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
    </div>
